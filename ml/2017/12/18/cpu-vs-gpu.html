<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Building a Deep Learning PC without breaking the bank - Robert Hardwick</title>
<meta name="description" content="and why do I even need a GPU anyway?">


  <meta name="author" content="Robert Hardwick">
  
  <meta property="article:author" content="Robert Hardwick">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="Robert Hardwick">
<meta property="og:title" content="Building a Deep Learning PC without breaking the bank">
<meta property="og:url" content="http://localhost:4000/ml/2017/12/18/cpu-vs-gpu.html">


  <meta property="og:description" content="and why do I even need a GPU anyway?">



  <meta property="og:image" content="http://localhost:4000/images/deeplearnpc/build1.jpg">





  <meta property="article:published_time" content="2017-12-18T00:00:00+00:00">






<link rel="canonical" href="http://localhost:4000/ml/2017/12/18/cpu-vs-gpu.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Robert Hardwick Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Robert Hardwick
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/assets/docs/cv.pdf">Curriculum Vitae</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('/images/deeplearnpc/build1.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Building a Deep Learning PC without breaking the bank

        
      </h1>
      
        <p class="page__lead">and why do I even need a GPU anyway?
</p>
      
      

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile.jpg" alt="Robert Hardwick" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Robert Hardwick</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>AI Engineer and DIY’er.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Manchester, UK</span>
        </li>
      

      
        
          
            <li><a href="https://linkedin.com/robertmhardwick" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">Linkedin</span></a></li>
          
        
          
            <li><a href="https://github.com/rob2910" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Building a Deep Learning PC without breaking the bank">
    <meta itemprop="description" content="and why do I even need a GPU anyway?">
    <meta itemprop="datePublished" content="2017-12-18T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
        <p>Whilst participating in a kaggle competition to identify dog breeds from images of dogs I found myself using an AWS GPU Compute service in order to train the deep neural network, however I quickly found the costs mounting up as i’d often be tweaking the code and paying for the cost of the server even when it wasn’t computing.</p>

<p>I decided to investigate the costs of building a deep learning capable PC that I could use for some entry level kaggle competitions and which could allow me to take my time with the code. A quick search online for such a PC suggests the cost should well exceed $1000, some are upwards of $4000. However, the type of kit you need is entirely dependent upon the problem and since my intention is for learning and to compete in entry level kaggle competitions I think it can be done for much less.</p>

<h1 id="selecting-the-kit">Selecting the Kit</h1>

<h2 id="gpu">GPU</h2>

<p>The most important piece of hardware in a deep learning rig is of course the GPU. I did a lot of reseach and found that the Nvidia GTX 1060 gave the best tradeoff between price and performance. Even better are the GTX 1070/1080Ti but they were a little beyond my budget, so I stuck with the 1060 which I managed to pick up for £209.99 which is a bargain in my opinon.</p>

<h2 id="cpu">CPU</h2>

<p>The CPU is not quite as important as the GPU so some money can be saved here. I went for an Intel i5 6400 which i sourced from ebay for £85.</p>

<h2 id="ram">RAM</h2>

<p>The more RAM the better, but with prices skyrocketting since I last purchased RAM I thought that 16GB is more than sufficient. Of course DDR4 has much faster overclocking capablility than DDR3 so that was a must. I went for a pair of Patriot 8GB 3000Mhz DDR4 modules at a cost of £168.10.</p>

<h2 id="motherboard">Motherboard</h2>

<p>Last but not least the motherboard. In order to achieve the speeds of 3000Mhz with the RAM the motherboard must support the ability to overclock the RAM, which is only available in the Z170/Z270 chipsets for the CPU I have chosen. Therefore I went with an MSI Mortar Micro ATX Z270 motherboard at a cost of £112.98.</p>

<h2 id="other-items">Other Items</h2>

<p>Other items which are less important and could quite easily be swapped for cheaper versions are the case and power supply. Since I thought I may also use this machine as a cryptocurrency miner I decided to go with a case that could add another graphics card, and more specifically a PSU with a good energy rating (silver)</p>

<h2 id="total-cost">Total Cost</h2>

<p>Below is a list of all the items sourced for the new build</p>

<table>
  <thead>
    <tr>
      <th>Item</th>
      <th style="text-align: center">Cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Nvidia GTX 1060 (6GB)</td>
      <td style="text-align: center">£209.99</td>
    </tr>
    <tr>
      <td>Intel i5 6400</td>
      <td style="text-align: center">£85</td>
    </tr>
    <tr>
      <td>Heatsink</td>
      <td style="text-align: center">£15</td>
    </tr>
    <tr>
      <td>Patriot 3000Mhz DDR4</td>
      <td style="text-align: center">£168.10</td>
    </tr>
    <tr>
      <td>MSI Mortar Z270M</td>
      <td style="text-align: center">£112.98</td>
    </tr>
    <tr>
      <td>Be Quiet BN274 600W PSU</td>
      <td style="text-align: center">£51.83</td>
    </tr>
    <tr>
      <td>Fractal Design Define Mini C TG</td>
      <td style="text-align: center">£72</td>
    </tr>
  </tbody>
</table>

<p>I decied to keep the SSD and HDD from a previous build, so lets add in the approximate cost of an SSD from amazon.</p>

<table>
  <thead>
    <tr>
      <th>Item</th>
      <th style="text-align: center">Cost</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SanDisk SSD PLUS 240 GB Sata III</td>
      <td style="text-align: center">£72.99</td>
    </tr>
  </tbody>
</table>

<p>Total Cost
£787.89</p>

<p>At the current exchange rate that works out to be about $1050 so we’re not far off the mark.</p>

<h2 id="build-photos">Build Photos</h2>

<figure class="third">
	<img src="http://localhost:4000/assets/images/deeplearnpc/build1.jpg" alt="" />
	<img src="http://localhost:4000/assets/images/deeplearnpc/build2.jpg" alt="" />
	<img src="http://localhost:4000/assets/images/deeplearnpc/build3.jpg" alt="" />
</figure>

<figure class="third">
	<img src="http://localhost:4000/assets/images/deeplearnpc/build4.jpg" alt="" />
	<img src="http://localhost:4000/assets/images/deeplearnpc/build5.jpg" alt="" />
	<img src="http://localhost:4000/assets/images/deeplearnpc/build6.jpg" alt="" />
</figure>

<h2 id="deep-learning-tools">Deep Learning Tools</h2>

<p>After setting up Linux and the basic Nvidia Graphics drivers here is a list of extra tools that we need for deep learning.</p>

<h3 id="cuda-framework">CUDA Framework</h3>

<p>CUDA is a framework that allows us to make use of Nvidia GPUs for parallel processing, see <a href="https://developer.nvidia.com/cuda-zone">https://developer.nvidia.com/cuda-zone</a></p>

<h3 id="nvidia-docker">Nvidia Docker</h3>

<p>Docker containers are like small leightweight VMs that can be loaded with software and deployed and stopped within seconds. Nvidia Docker allows the containers access to the GPU of the host machine <a href="https://github.com/NVIDIA/nvidia-docker">https://github.com/NVIDIA/nvidia-docker</a></p>

<p>Since we’re using keras I found a great Dockerfile and a helpful makefile that means we can deploy a container with all the tools we require for deep learning without having to locate, configure and install all the dependencies.</p>

<p><a href="https://github.com/keras-team/keras/blob/master/docker/Makefile">Keras Docker Github</a></p>

<p>Once the code is checked out, we simply navigate to the keras/docker folder and create a docker container which should automatically create a jupyter notebook ready to use.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make notebook GPU=0
</code></pre></div></div>

<h2 id="cpu-vs-gpu">CPU vs GPU</h2>

<p>One of the biggest reasons why deep learning has become so popular in recent years is the advancements of GPU hardware. To give us an idea of just how much better GPUs can be for training neural networks let’s compare their performances at a simple matrix multiplcation.</p>

<p>I generated 2 random matrices multiplied them together and timed how long the process took. I incremented the dimension of the matrix by 100 each time up to a 10000x10000 matrix and did this for both the cpu and gpu and plotted the results in a chart.</p>

<figure style="width:800px;text-align: center;" class="align-center">
	<img src="http://localhost:4000/assets/images/cpugpu/graph.png" alt="" />
	<figcaption>Testing the principle</figcaption>
</figure>

<p>As you can see from the diagram above the GPU ( orange ) is significantly faster at this problem and the large the size of the matrix the more significant the time savings. Given that this is just 1 matrix and training a neural network might involve hundreds of matrix multiplications you can see how significant using a GPU can be.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-12-18T00:00:00+00:00">December 18, 2017</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=Building+a+Deep+Learning+PC+without+breaking+the+bank%20http%3A%2F%2Flocalhost%3A4000%2Fml%2F2017%2F12%2F18%2Fcpu-vs-gpu.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fml%2F2017%2F12%2F18%2Fcpu-vs-gpu.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fml%2F2017%2F12%2F18%2Fcpu-vs-gpu.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/ml/2017/10/31/hello-world.html" class="pagination--pager" title="Deep Learning : Hello World
">Previous</a>
    
    
      <a href="/ml/2020/11/29/fixmatch.html" class="pagination--pager" title="FixMatch - A Simple yet Effective approach to Semi Supervised Learning
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ml/2020/11/29/fixmatch.html" rel="permalink">FixMatch - A Simple yet Effective approach to Semi Supervised Learning
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Deep Neural Networks can deliver impressive performance for a variety of computer vision tasks. The key to such impressive performance is in allowing the mod...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ml/2017/10/31/hello-world.html" rel="permalink">Deep Learning : Hello World
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">As with learning any new tool or programming language it’s always a good idea to dip your toe in the water before attempting a something more complicated.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Robert Hardwick. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
